{"version":3,"file":"_server.ts-BTgaUDAG.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/config/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { writeFile } from \"fs/promises\";\nimport { join } from \"path\";\nimport { homedir } from \"os\";\nconst AGENTS_DIR = join(homedir(), \".agents\");\nconst POST = async ({ request }) => {\n  const { file, content } = await request.json();\n  if (!file || typeof content !== \"string\") {\n    return json({ error: \"Invalid request\" }, { status: 400 });\n  }\n  if (file.includes(\"/\") || file.includes(\"..\")) {\n    return json({ error: \"Invalid file name\" }, { status: 400 });\n  }\n  if (!file.endsWith(\".md\") && !file.endsWith(\".yaml\")) {\n    return json({ error: \"Invalid file type\" }, { status: 400 });\n  }\n  try {\n    await writeFile(join(AGENTS_DIR, file), content, \"utf-8\");\n    return json({ success: true });\n  } catch (e) {\n    console.error(\"Error saving file:\", e);\n    return json({ error: \"Failed to save file\" }, { status: 500 });\n  }\n};\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;AAIA,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,EAAE,EAAE,SAAS,CAAC;AACxC,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,KAAK;AACpC,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE;AAChD,EAAE,IAAI,CAAC,IAAI,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;AAC5C,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,iBAAiB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAC9D,EAAE;AACF,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;AACjD,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,mBAAmB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAChE,EAAE;AACF,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;AACxD,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,mBAAmB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAChE,EAAE;AACF,EAAE,IAAI;AACN,IAAI,MAAM,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE,OAAO,EAAE,OAAO,CAAC;AAC7D,IAAI,OAAO,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AAClC,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE;AACd,IAAI,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,CAAC,CAAC;AAC1C,IAAI,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,qBAAqB,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAClE,EAAE;AACF;;;;"}